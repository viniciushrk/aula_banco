CREATE DATABASE IMOBILIARIA;
USE imobiliaria;
CREATE TABLE BAIRRO (
       CDBAIRRO            NUMERIC(4) NOT NULL,
       NMBAIRRO            VARCHAR(20) NULL,
       CDCIDADE            NUMERIC(4) NOT NULL,
       SGESTADO            CHAR(2) NOT NULL
);
ALTER TABLE BAIRRO
ADD CONSTRAINT PK_BAIRRO PRIMARY KEY (CDBAIRRO) ;

CREATE TABLE CIDADE (
       CDCIDADE            NUMERIC(4) NOT NULL,
       NMCIDADE            VARCHAR(20) NULL,
       SGESTADO            CHAR(2) NOT NULL
);
ALTER TABLE CIDADE
ADD  CONSTRAINT PK_CIDADE PRIMARY KEY (CDCIDADE);

CREATE TABLE ESTADO (
      SGESTADO            CHAR(2) NOT NULL,
      NMESTADO            VARCHAR(20) NULL
);
ALTER TABLE ESTADO
ADD  CONSTRAINT PK_ESTADO PRIMARY KEY (SGESTADO) ;

CREATE TABLE COMPRADOR (
      CDCOMPRADOR      NUMERIC(4) NOT NULL,
      NMCOMPRADOR       VARCHAR(40) NULL,
      NMENDERECO        VARCHAR(40) NULL,
      NRCPF             NUMERIC(11)  NULL,
      NMCIDADE          VARCHAR(20) NULL,
      NMBAIRRO          VARCHAR(20) NULL,      
      SGESTADO          CHAR(2) NULL,      
      TELEFONE          VARCHAR(20) NULL,      
      EMAIL             VARCHAR(80) NULL      
);
ALTER TABLE COMPRADOR
ADD CONSTRAINT PK_COMPRADOR PRIMARY KEY (CDCOMPRADOR) ;

CREATE TABLE FAIXA_IMOVEL (
      CDFAIXA      NUMERIC(4) NOT NULL,
      NMFAIXA      VARCHAR(30) NULL,
      VLMINIMO     NUMERIC(7,2) NULL,
      VLMAXIMO     NUMERIC(7,2) NULL
);
ALTER TABLE FAIXA_IMOVEL
ADD  CONSTRAINT PK_FAIXA_IMOVEL PRIMARY KEY (CDFAIXA) ;

CREATE TABLE IMOVEL(
      CDIMOVEL      NUMERIC(4) NOT NULL,
      CDVENDEDOR    NUMERIC(4),
      CDBAIRRO      NUMERIC(4),
      CDCIDADE      NUMERIC(4),
      SGESTADO      CHAR(2) NULL,
      NMENDERECO    VARCHAR(40) NULL,
      NRAREAUTIL    NUMERIC(7,2) NULL,
      NRAREATOTAL   NUMERIC(7,2) NULL,
      DSIMOVEL      VARCHAR(300) NULL,
      VLPRECO       NUMERIC(8,2) NULL,
      NROFERTAS     NUMERIC(4) NULL,
      STVENDIDO     CHAR(1)NULL,
      DTLANCTO      DATE NULL,
      IMOVEL_INDICADO NUMERIC(4) NULL
 );
ALTER TABLE IMOVEL
ADD  CONSTRAINT PK_IMOVEL PRIMARY KEY (CDIMOVEL);

CREATE TABLE OFERTA (
      CDCOMPRADOR   NUMERIC(4) NOT NULL,
      CDIMOVEL      NUMERIC(4),
      VLOFERTA      NUMERIC(7,2) NULL,
      DTOFERTA      DATE NULL
);

CREATE TABLE VENDEDOR(
      CDVENDEDOR      NUMERIC(4) NOT NULL,
      NMVENDEDOR       VARCHAR(40) NULL,
      NMENDERECO        VARCHAR(40) NULL,
      NRCPF             NUMERIC(11)  NULL,
      NMCIDADE          VARCHAR(20) NULL,
      NMBAIRRO          VARCHAR(20) NULL,      
      SGESTADO          CHAR(2) NULL,      
      TELEFONE          VARCHAR(20) NULL,      
      EMAIL             VARCHAR(80) NULL      
);
ALTER TABLE VENDEDOR
ADD  CONSTRAINT PK_VENDEDOR PRIMARY KEY (CDVENDEDOR) ;

ALTER TABLE BAIRRO  ADD  CONSTRAINT CIDADE_BAIRRO
FOREIGN KEY (CDCIDADE)  REFERENCES CIDADE(CDCIDADE);
 
ALTER TABLE CIDADE
ADD  CONSTRAINT ESTADO_CIDADE
FOREIGN KEY (SGESTADO)  REFERENCES ESTADO(SGESTADO) ;                             

ALTER TABLE IMOVEL
ADD  CONSTRAINT VENDEDOR_IMOVEL 
FOREIGN KEY (CDVENDEDOR)  REFERENCES VENDEDOR(CDVENDEDOR) ; 

ALTER TABLE IMOVEL
ADD  CONSTRAINT BAIRRO_IMOVEL
FOREIGN KEY (CDBAIRRO) REFERENCES BAIRRO(CDBAIRRO)  ;                                                   

ALTER TABLE OFERTA
ADD  CONSTRAINT IMOVEL_OFERTA
FOREIGN KEY (CDIMOVEL) REFERENCES IMOVEL(CDIMOVEL) ;                              

ALTER TABLE OFERTA
ADD  CONSTRAINT COMPRADOR_OFERTA
FOREIGN KEY ( CDCOMPRADOR) REFERENCES COMPRADOR( CDCOMPRADOR); 

--inserção dos dados
INSERT INTO ESTADO (SGESTADO, NMESTADO)
 VALUES ( 'SP', 'SÃO PAULO' );  
INSERT INTO ESTADO (SGESTADO, NMESTADO)
 VALUES ( 'RJ', 'RIO DE JANEIRO' );
INSERT INTO ESTADO (SGESTADO, NMESTADO)
 VALUES ( 'RO', 'RONDÔNIA' );
 
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 1,'SP', 'SÃO PAULO' );
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 2,'SP', 'SANTO ANDRÉ' ); 
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 3,'RJ', 'MARICÁ' );
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 4,'RJ', 'RIO DE JANEIRO' );
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 5,'RJ', 'NITERÓI' );
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 6,'RO', 'PORTO VELHO' );
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 7,'RO', 'ALTA FLORESTA' );
INSERT INTO CIDADE (CDCIDADE, SGESTADO, NMCIDADE)
 VALUES ( 8,'RO', 'JI-PARANÁ' );     
 
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(1,1,'SP','JARDINS');
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(2,1,'SP','MORUMBI'); 
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(3,2,'SP','AEROPORTO'); 
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(4,3,'RJ','MIGUEL COUTO');
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(5,4,'RJ','FLAMENGO');
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(6,6,'RO','PEDRINHAS'); 
INSERT INTO BAIRRO( CDBAIRRO, CDCIDADE, SGESTADO, NMBAIRRO)
 VALUES(7,6,'RO','CASTANHEIRAS'); 

INSERT INTO VENDEDOR(CDVENDEDOR, NMVENDEDOR, NMENDERECO, EMAIL)
 VALUES(1,'MARIA DA SILVA', 'RUA DO GRITO,45','msilva@hotmail.com');  
INSERT INTO VENDEDOR(CDVENDEDOR, NMVENDEDOR, NMENDERECO, EMAIL)
 VALUES(2,'MARCOS ANDRADE', 'AV. DA SAUDADE, 325','mandrade@gmail.com');
INSERT INTO VENDEDOR(CDVENDEDOR, NMVENDEDOR, NMENDERECO, EMAIL)
 VALUES(3,'ANDRE CARDOSO', 'AV BRASIL','acardoso@yahoo.com');                                
INSERT INTO VENDEDOR(CDVENDEDOR, NMVENDEDOR, NMENDERECO, EMAIL)
 VALUES(4,'TATIANA DE SOUZA', 'RUA DO IMPERADOR 778','tsouza@hotmail.com');
 
INSERT INTO IMOVEL(CDIMOVEL, CDVENDEDOR, CDBAIRRO, CDCIDADE,
SGESTADO, NMENDERECO, NRAREAUTIL, NRAREATOTAL, VLPRECO, DTLANCTO)
 VALUES(1,1,1,1,'SP','AL TIETE, 3304 AP 101', 250,400,18000,'2001/05/11');
INSERT INTO IMOVEL(CDIMOVEL, CDVENDEDOR, CDBAIRRO, CDCIDADE,
SGESTADO, NMENDERECO, NRAREAUTIL, NRAREATOTAL, VLPRECO, DTLANCTO)
 VALUES(2,1,2,1,'SP','AV MORUMBI, 2230',150,250,13500,'2001/12/12');
INSERT INTO IMOVEL(CDIMOVEL, CDVENDEDOR, CDBAIRRO, CDCIDADE,
SGESTADO, NMENDERECO, NRAREAUTIL, NRAREATOTAL, VLPRECO, DTLANCTO)
 VALUES(3,2,1,4,'RJ','R GAL OSORIO, 445 AP34',250,400,18500,'2001/01/15');
INSERT INTO IMOVEL(CDIMOVEL, CDVENDEDOR, CDBAIRRO, CDCIDADE,
SGESTADO, NMENDERECO, NRAREAUTIL, NRAREATOTAL, VLPRECO, DTLANCTO)
 VALUES(4,2,2,4,'RJ','R D PEDRO I, 882',120,200,11000,'2002/01/15');
INSERT INTO IMOVEL(CDIMOVEL, CDVENDEDOR, CDBAIRRO, CDCIDADE,
SGESTADO, NMENDERECO, NRAREAUTIL, NRAREATOTAL, VLPRECO, DTLANCTO)
 VALUES(5,3,3,6,'RO','R D PEDRO II, 443',110,210,19000,'2009/09/26'); 
 
INSERT INTO COMPRADOR (CDCOMPRADOR, NMCOMPRADOR, NMENDERECO, EMAIL)
VALUES(1,'EMANUEL ANTUNES','RUA SARAIVA, 452', 'eantunes@hotmail.com'); 
INSERT INTO COMPRADOR (CDCOMPRADOR, NMCOMPRADOR, NMENDERECO, EMAIL)
VALUES(2,'JOANA PERREIRA','AV PORTUGAL 52', 'jpereira@hotmail.com'); 
INSERT INTO COMPRADOR (CDCOMPRADOR, NMCOMPRADOR, NMENDERECO, EMAIL)
VALUES(3,'RONALDO COMPELO','R ESTADOS UNIDO, 790', 'rcampelo@gmail.com'); 
INSERT INTO COMPRADOR (CDCOMPRADOR, NMCOMPRADOR, NMENDERECO, EMAIL)
VALUES(4,'MANFRED AUGUSTO','AV BRASIL, 351', 'maugusto@gmail.com'); 

INSERT INTO OFERTA (CDCOMPRADOR, CDIMOVEL, VLOFERTA, DTOFERTA)
 VALUES(1,1,17000,'2002/01/10');
INSERT INTO OFERTA (CDCOMPRADOR, CDIMOVEL, VLOFERTA, DTOFERTA)
 VALUES(1,3,18000,'2002/01/10');
INSERT INTO OFERTA (CDCOMPRADOR, CDIMOVEL, VLOFERTA, DTOFERTA)
 VALUES(2,2,13500,'2002/01/15');
INSERT INTO OFERTA (CDCOMPRADOR, CDIMOVEL, VLOFERTA, DTOFERTA)
 VALUES(2,4,10000,'2002/01/15');
INSERT INTO OFERTA (CDCOMPRADOR, CDIMOVEL, VLOFERTA, DTOFERTA)
 VALUES(3,1,16000,'2002/01/05');
INSERT INTO OFERTA (CDCOMPRADOR, CDIMOVEL, VLOFERTA, DTOFERTA)
 VALUES(3,2,14000,'2002/01/20');  